<!DOCTYPE html>
<html lang="en">
<head>
  <!-- META -->
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>SoloTravel Companion · Hyper UI</title>

  <!-- BOOTSTRAP CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  />

  <!-- FONT AWESOME -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  />

  <!-- LEAFLET CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <!-- GOOGLE FONT -->
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
    rel="stylesheet"
  />

  <!-- APP CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-app">

  <!-- APP WRAPPER -->
  <div class="min-vh-100 d-flex flex-column">

    <!-- TOP APP BAR -->
    <header
      class="app-header border-bottom bg-white bg-opacity-75 backdrop-blur sticky-top"
    >
      <div
        class="container-fluid px-3 px-md-4 py-2 d-flex align-items-center justify-content-between"
      >
        <!-- BRAND + MODE -->
        <div class="d-flex align-items-center gap-2">
          <div
            class="rounded-circle bg-gradient-primary text-white d-flex align-items-center justify-content-center shadow-sm"
            style="width:40px;height:40px;"
          >
            <i class="fa-solid fa-compass"></i>
          </div>
          <div class="d-flex flex-column">
            <div class="d-flex align-items-center gap-2">
              <span class="fw-bold">SoloTravel Companion</span>
              <span
                class="badge bg-gradient-pill text-white rounded-pill small d-flex align-items-center gap-1"
              >
                <i class="fa-solid fa-wand-magic-sparkles"></i>
                <span>Smart</span>
              </span>
            </div>
            <span class="small text-muted" id="headerSubtitle">
              Safer, softer solo travel – tuned to you.
            </span>
          </div>
        </div>

        <!-- LOCATION + PROFILE -->
        <div class="d-flex align-items-center gap-3">
          <div class="d-none d-md-flex flex-column text-end small">
            <span class="text-muted d-flex justify-content-end align-items-center gap-1">
              <i class="fa-solid fa-location-dot text-danger"></i>
              <span>Live Location</span>
            </span>
            <span
              class="fw-semibold text-truncate"
              id="headerLocationLabel"
            >
              Off · tap Enable
            </span>
          </div>

          <button
            id="btnLocation"
            type="button"
            class="btn btn-outline-primary btn-sm rounded-pill d-flex align-items-center gap-2 shadow-sm"
          >
            <i class="fa-solid fa-location-crosshairs"></i>
            <span class="d-none d-sm-inline">Enable</span>
          </button>

          <div class="position-relative">
            <div
              class="rounded-circle overflow-hidden border bg-white shadow-sm"
              style="width:40px;height:40px;"
            >
              <img
                src="https://ui-avatars.com/api/?name=Alex+Traveler&background=random"
                alt="Profile"
                class="w-100 h-100 object-fit-cover"
              />
            </div>
            <span
              class="position-absolute bottom-0 end-0 translate-middle p-1 bg-success border border-white rounded-circle"
            ></span>
          </div>
        </div>
      </div>
    </header>

    <!-- RISK BANNER -->
    <div
      id="riskBanner"
      class="bg-gradient-danger text-white small py-2 px-3 d-none"
    >
      <div
        class="container-fluid d-flex align-items-center justify-content-between gap-2"
      >
        <div class="d-flex flex-column">
          <div class="fw-semibold d-flex align-items-center gap-2">
            <i class="fa-solid fa-triangle-exclamation"></i>
            <span>Route may be risky</span>
          </div>
          <span class="opacity-75">
            Stay on brighter, busier streets and avoid isolated shortcuts until things feel better.
          </span>
        </div>
        <button
          id="btnImSafe"
          class="btn btn-light btn-sm rounded-pill fw-semibold px-3"
          type="button"
        >
          I’m safe
        </button>
      </div>
    </div>

    <!-- MAIN BODY -->
    <main class="flex-grow-1 d-flex flex-column">

      <div
        class="container-fluid flex-grow-1 d-flex px-0 px-md-3 py-2 py-md-3"
      >
        <!-- SIDEBAR (DESKTOP) -->
        <aside
          class="d-none d-md-flex flex-column border-end bg-white bg-opacity-90 backdrop-blur shadow-sm"
          style="width:250px;"
        >
          <!-- NAV -->
          <div class="p-3 border-bottom">
            <div
              class="small text-muted text-uppercase fw-semibold d-flex align-items-center justify-content-between mb-2"
            >
              <span>Navigate</span>
              <span
                class="badge bg-secondary-subtle text-secondary rounded-pill small"
              >
                App
              </span>
            </div>
            <div class="nav nav-pills flex-column gap-1" id="navMain">
              <button
                type="button"
                class="nav-link d-flex align-items-center gap-2 py-2 px-3 rounded-3 active"
                data-bs-target="#appCarousel"
                data-bs-slide-to="0"
              >
                <i class="fa-solid fa-map-location-dot"></i>
                <span>Map</span>
              </button>
              <button
                type="button"
                class="nav-link d-flex align-items-center gap-2 py-2 px-3 rounded-3"
                data-bs-target="#appCarousel"
                data-bs-slide-to="1"
              >
                <i class="fa-solid fa-lightbulb"></i>
                <span>Suggestions</span>
              </button>
              <button
                type="button"
                class="nav-link d-flex align-items-center gap-2 py-2 px-3 rounded-3"
                data-bs-target="#appCarousel"
                data-bs-slide-to="2"
              >
                <i class="fa-solid fa-calendar-day"></i>
                <span>Itinerary</span>
              </button>
              <button
                type="button"
                class="nav-link d-flex align-items-center gap-2 py-2 px-3 rounded-3"
                data-bs-target="#appCarousel"
                data-bs-slide-to="3"
              >
                <i class="fa-solid fa-shield-heart"></i>
                <span>Safety</span>
              </button>
              <button
                type="button"
                class="nav-link d-flex align-items-center gap-2 py-2 px-3 rounded-3"
                data-bs-target="#appCarousel"
                data-bs-slide-to="4"
              >
                <i class="fa-solid fa-message"></i>
                <span>Chat</span>
              </button>
            </div>
          </div>

          <!-- SAFETY SUMMARY -->
          <div class="p-3 mt-auto border-top small">
            <div
              class="d-flex align-items-center justify-content-between mb-2"
            >
              <div class="d-flex align-items-center gap-2">
                <span
                  id="safetyDotMini"
                  class="rounded-circle bg-secondary"
                  style="width:9px;height:9px;"
                ></span>
                <span class="text-muted">Safety</span>
              </div>
              <span
                id="safetyStatusChip"
                class="badge rounded-pill bg-secondary-subtle text-secondary d-flex align-items-center gap-1"
              >
                <i class="fa-solid fa-shield-halved"></i>
                <span>Unknown</span>
              </span>
            </div>
            <p
              id="safetyStatusText"
              class="mb-2 text-muted small"
            >
              Turn on Live Location so I can softly track how far you wander from your safe starting circle.
            </p>
            <button
              id="btnSOS"
              type="button"
              class="btn btn-danger btn-sm w-100 rounded-pill mb-1 d-flex align-items-center justify-content-center gap-2"
              disabled
            >
              <i class="fa-solid fa-triangle-exclamation"></i>
              <span>SOS / 112</span>
            </button>
            <span class="text-muted small d-block">
              Add at least <strong>3 contacts</strong> to unlock SOS.
            </span>
            <button
              type="button"
              class="btn btn-link p-0 mt-2 small d-inline-flex align-items-center gap-1 text-decoration-none"
              data-bs-toggle="modal"
              data-bs-target="#contactsModal"
            >
              <i class="fa-solid fa-user-group"></i>
              <span>Manage contacts</span>
            </button>
          </div>
        </aside>

        <!-- APP + CHAT -->
        <div class="flex-grow-1 d-flex flex-column flex-md-row">
          <!-- APP AREA -->
          <section class="flex-grow-1 d-flex flex-column">
            <!-- GREETING + MOOD -->
            <div class="px-3 px-md-4 pt-2 pb-1">
              <div
                class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-2"
              >
                <div class="d-flex flex-column">
                  <div class="d-flex align-items-center gap-2">
                    <h5
                      id="greetingTitle"
                      class="mb-0 fw-bold"
                    >
                      Good Morning, Alex
                    </h5>
                    <span
                      class="badge bg-success-subtle text-success rounded-pill small d-flex align-items-center gap-1"
                    >
                      <i class="fa-solid fa-heart-pulse"></i>
                      <span>Mood aware</span>
                    </span>
                  </div>
                  <span class="small text-muted mt-1">
                    I adapt to your mood, your route and your energy, not the other way around.
                  </span>
                </div>

                <div
                  class="d-flex flex-column align-items-start align-items-lg-end gap-1"
                >
                  <span
                    class="small text-muted d-flex align-items-center gap-1"
                  >
                    <i class="fa-solid fa-face-smile-beam text-warning"></i>
                    <span>Your mood now</span>
                  </span>
                  <div
                    id="moodStrip"
                    class="d-flex flex-wrap gap-1"
                  >
                    <button
                      type="button"
                      class="btn btn-sm btn-dark rounded-pill px-3 d-flex align-items-center gap-1 active"
                      data-mood="Adventurous"
                    >
                      <i class="fa-solid fa-person-hiking"></i>
                      <span>Adventurous</span>
                    </button>
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary rounded-pill px-3 d-flex align-items-center gap-1"
                      data-mood="Relaxed"
                    >
                      <i class="fa-solid fa-mug-hot"></i>
                      <span>Relaxed</span>
                    </button>
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary rounded-pill px-3 d-flex align-items-center gap-1"
                      data-mood="Lonely"
                    >
                      <i class="fa-solid fa-face-sad-tear"></i>
                      <span>Lonely</span>
                    </button>
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary rounded-pill px-3 d-flex align-items-center gap-1"
                      data-mood="Hungry"
                    >
                      <i class="fa-solid fa-utensils"></i>
                      <span>Hungry</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- MAIN CAROUSEL -->
            <div
              id="appCarousel"
              class="carousel slide flex-grow-1"
              data-bs-interval="false"
            >
              <div class="carousel-inner h-100">

                <!-- SLIDE 0: MAP -->
                <div class="carousel-item active h-100">
                  <div class="h-100 d-flex flex-column px-3 px-md-4 pb-3">
                    <div class="card card-glass flex-grow-1 d-flex flex-column overflow-hidden">
                      <div class="card-body d-flex flex-column p-3 p-md-3">
                        <div
                          class="d-flex align-items-center justify-content-between mb-2"
                        >
                          <div class="d-flex flex-column">
                            <span
                              class="small text-muted d-flex align-items-center gap-1"
                            >
                              <i class="fa-solid fa-location-dot text-danger"></i>
                              <span>Live Map</span>
                            </span>
                            <span class="fw-semibold">You are here</span>
                          </div>
                          <div class="d-flex align-items-center gap-2">
                            <span
                              class="badge rounded-pill bg-primary-subtle text-primary small d-flex align-items-center gap-1"
                            >
                              <i class="fa-solid fa-satellite-dish"></i>
                              <span>Live</span>
                            </span>
                            <span
                              class="badge rounded-pill bg-info-subtle text-info small d-flex align-items-center gap-1"
                            >
                              <i class="fa-solid fa-circle-notch"></i>
                              <span>Safe circle</span>
                            </span>
                          </div>
                        </div>

                        <div
                          class="position-relative flex-grow-1 rounded-4 overflow-hidden border border-light"
                        >
                          <div
                            id="liveMap"
                            class="w-100 h-100 bg-secondary-subtle"
                          >
                            <div
                              id="mapLoader"
                              class="position-absolute top-50 start-50 translate-middle text-muted small d-flex align-items-center gap-2"
                            >
                              <i class="fa-solid fa-spinner fa-spin"></i>
                              <span>Waiting for location…</span>
                            </div>
                          </div>
                        </div>

                        <div
                          id="mapHintText"
                          class="small text-muted d-flex flex-wrap align-items-center justify-content-between gap-2 mt-2"
                        >
                          <span>
                            Tap <strong>Enable</strong> at the top to lock onto where you are.
                          </span>
                          <span
                            class="text-primary d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-hand-pointer"></i>
                            <span>Pins appear once I find safe spots near you.</span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- SLIDE 1: SUGGESTIONS -->
                <div class="carousel-item h-100">
                  <div class="h-100 d-flex flex-column px-3 px-md-4 pb-3">
                    <div class="card card-glass flex-grow-1 d-flex flex-column overflow-hidden">
                      <div class="card-body p-3 p-md-3 d-flex flex-column">
                        <div
                          class="d-flex align-items-center justify-content-between mb-2"
                        >
                          <div>
                            <span
                              class="small text-muted d-flex align-items-center gap-1"
                            >
                              <i class="fa-solid fa-lightbulb text-warning"></i>
                              <span>Smart Suggestions</span>
                            </span>
                            <span class="fw-semibold">
                              Mood-based spots near you
                            </span>
                          </div>
                          <span
                            class="badge bg-success-subtle text-success rounded-pill small d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-brain"></i>
                            <span>Context aware</span>
                          </span>
                        </div>

                        <p class="small text-muted mb-2">
                          Once location is on, I’ll suggest <strong>3–4 nearby places</strong> tuned to your mood and pin them on the map. Tap a card to fly the map there.
                        </p>

                        <div
                          id="suggestionsList"
                          class="flex-grow-1 overflow-auto d-flex flex-column gap-2 small"
                        >
                          <div
                            class="border border-dashed rounded-3 p-3 d-flex flex-column align-items-center justify-content-center text-muted text-center"
                          >
                            <i class="fa-solid fa-location-crosshairs mb-1"></i>
                            <span>
                              Turn on location to see mood-aware suggestions and map pins.
                            </span>
                          </div>
                        </div>

                        <div
                          class="mt-2 d-flex align-items-center justify-content-between flex-wrap gap-2 small"
                        >
                          <span
                            id="suggestionsMoodLabel"
                            class="text-muted d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-face-smile text-warning"></i>
                            <span>Mood: Adventurous</span>
                          </span>
                          <button
                            id="btnRefreshSuggestions"
                            type="button"
                            class="btn btn-outline-primary btn-sm rounded-pill d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-rotate"></i>
                            <span>Refresh</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- SLIDE 2: ITINERARY -->
                <div class="carousel-item h-100">
                  <div class="h-100 d-flex flex-column px-3 px-md-4 pb-3">
                    <div class="card card-glass flex-grow-1 d-flex flex-column overflow-hidden">
                      <div class="card-body p-3 p-md-3 d-flex flex-column">
                        <div
                          class="d-flex align-items-center justify-content-between mb-2"
                        >
                          <div>
                            <span
                              class="small text-muted d-flex align-items-center gap-1"
                            >
                              <i class="fa-solid fa-calendar-day text-primary"></i>
                              <span>Itinerary</span>
                            </span>
                            <span class="fw-semibold">Soft, adjustable plan</span>
                          </div>
                          <span
                            class="badge bg-secondary-subtle text-secondary rounded-pill small d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-feather-pointed"></i>
                            <span>Flexible</span>
                          </span>
                        </div>

                        <p class="small text-muted mb-2">
                          Think of this as a gentle structure, not a strict to-do list. Change plans anytime – I’ll keep adapting.
                        </p>

                        <div class="row g-2 small flex-grow-1 overflow-auto">
                          <div class="col-md-6">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center justify-content-between mb-1"
                              >
                                <span
                                  class="badge bg-primary-subtle text-primary rounded-pill small d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-plane-arrival"></i>
                                  <span>Day 1</span>
                                </span>
                                <span class="text-muted small">Arrival</span>
                              </div>
                              <ul class="mb-0 ps-3">
                                <li>
                                  Get to your stay using a <strong>main road</strong> or well-known route.
                                </li>
                                <li>Short walk around your block in daylight.</li>
                                <li>
                                  Note a safe café, store and clear local landmark.
                                </li>
                              </ul>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center justify-content-between mb-1"
                              >
                                <span
                                  class="badge bg-primary-subtle text-primary rounded-pill small d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-city"></i>
                                  <span>Day 2</span>
                                </span>
                                <span class="text-muted small">Explore</span>
                              </div>
                              <ul class="mb-0 ps-3">
                                <li>
                                  See <strong>one</strong> major attraction slowly instead of rushing many.
                                </li>
                                <li>
                                  Lunch in a solo-friendly café or simple restaurant.
                                </li>
                                <li>
                                  Join a small, safe group activity in the evening.
                                </li>
                              </ul>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center justify-content-between mb-1"
                              >
                                <span
                                  class="badge bg-primary-subtle text-primary rounded-pill small d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-mountain-sun"></i>
                                  <span>Day 3</span>
                                </span>
                                <span class="text-muted small">Deeper</span>
                              </div>
                              <ul class="mb-0 ps-3">
                                <li>
                                  Choose either nature or city – not both in a rush.
                                </li>
                                <li>
                                  Plan transport back before it gets dark.
                                </li>
                                <li>
                                  Spend the last part of the day somewhere familiar.
                                </li>
                              </ul>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center justify-content-between mb-1"
                              >
                                <span
                                  class="badge bg-primary-subtle text-primary rounded-pill small d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-suitcase-rolling"></i>
                                  <span>Departure day</span>
                                </span>
                                <span class="text-muted small">Wrap</span>
                              </div>
                              <ul class="mb-0 ps-3">
                                <li>Stay near your area before departure time.</li>
                                <li>
                                  Leave early to avoid rushing to transport hubs.
                                </li>
                                <li>
                                  Have a “safe backup spot” if you reach too early.
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>

                        <div
                          class="mt-2 small text-muted d-flex justify-content-end"
                        >
                          In a real app, this would sync with bookings, check-ins and transit times.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- SLIDE 3: SAFETY -->
                <div class="carousel-item h-100">
                  <div class="h-100 d-flex flex-column px-3 px-md-4 pb-3">
                    <div class="card card-glass flex-grow-1 d-flex flex-column overflow-hidden">
                      <div class="card-body p-3 p-md-3 d-flex flex-column">
                        <div
                          class="d-flex align-items-center justify-content-between mb-2"
                        >
                          <div>
                            <span
                              class="small text-muted d-flex align-items-center gap-1"
                            >
                              <i class="fa-solid fa-shield-heart text-danger"></i>
                              <span>Safety Hub</span>
                            </span>
                            <span class="fw-semibold">Soft guardrails</span>
                          </div>
                          <span
                            id="checkInStatusChip"
                            class="badge bg-secondary-subtle text-secondary rounded-pill small d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-clock"></i>
                            <span>No check-in</span>
                          </span>
                        </div>

                        <div class="row g-3 small flex-grow-1 overflow-auto">
                          <div class="col-md-6">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center gap-2 mb-1"
                              >
                                <span
                                  id="safetyDot"
                                  class="rounded-circle"
                                  style="width:10px;height:10px;background:#9ca3af;"
                                ></span>
                                <span class="fw-semibold text-muted">
                                  Current safety estimate
                                </span>
                              </div>
                              <p
                                id="safetyStatusTextMain"
                                class="mb-1 text-muted"
                              >
                                Waiting for your location before I guess how safe your surroundings feel.
                              </p>
                              <p class="mb-0 text-muted">
                                I draw a <strong>safe circle</strong> around where you start and softly nudge you if you wander far away from it.
                              </p>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center gap-2 mb-1"
                              >
                                <i class="fa-solid fa-stopwatch"></i>
                                <span class="fw-semibold">
                                  Check-in timers
                                </span>
                              </div>
                              <p class="text-muted mb-2">
                                Heading somewhere? Start a timer. If you don’t check in, I treat it as a safety signal (simulation).
                              </p>
                              <div
                                class="d-flex flex-wrap gap-2 mb-2"
                              >
                                <button
                                  id="btnCheckIn15"
                                  type="button"
                                  class="btn btn-outline-primary btn-sm rounded-pill d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-clock"></i>
                                  <span>15 min</span>
                                </button>
                                <button
                                  id="btnCheckIn30"
                                  type="button"
                                  class="btn btn-outline-primary btn-sm rounded-pill d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-clock"></i>
                                  <span>30 min</span>
                                </button>
                                <button
                                  id="btnCancelCheckIn"
                                  type="button"
                                  class="btn btn-outline-secondary btn-sm rounded-pill d-flex align-items-center gap-1"
                                >
                                  <i class="fa-solid fa-ban"></i>
                                  <span>Cancel</span>
                                </button>
                              </div>
                              <div
                                id="checkInCountdown"
                                class="text-muted small d-flex align-items-center gap-2"
                              >
                                <i class="fa-solid fa-hourglass-half"></i>
                                <span>No active check-in.</span>
                              </div>
                            </div>
                          </div>
                          <div class="col-12">
                            <div
                              class="border rounded-3 p-2 h-100 bg-white bg-opacity-75 d-flex flex-column"
                            >
                              <div
                                class="d-flex align-items-center justify-content-between mb-1"
                              >
                                <span
                                  class="fw-semibold d-flex align-items-center gap-2"
                                >
                                  <i class="fa-solid fa-user-group"></i>
                                  <span>Safety Circle</span>
                                </span>
                                <button
                                  type="button"
                                  class="btn btn-outline-secondary btn-sm rounded-pill d-flex align-items-center gap-1"
                                  data-bs-toggle="modal"
                                  data-bs-target="#contactsModal"
                                >
                                  <i class="fa-solid fa-user-plus"></i>
                                  <span>Contacts</span>
                                </button>
                              </div>
                              <p class="text-muted mb-2">
                                People you trust who would be notified in a real app if SOS is triggered or a check-in is missed.
                              </p>
                              <div
                                id="safetyCirclePills"
                                class="d-flex flex-wrap gap-1"
                              >
                                <span
                                  class="badge bg-secondary-subtle text-secondary rounded-pill small"
                                >
                                  Add contacts to build your circle.
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div
                          class="mt-2 d-flex justify-content-end gap-2"
                        >
                          <button
                            id="btnOpenSOSConfirm"
                            type="button"
                            class="btn btn-outline-danger btn-sm rounded-pill d-flex align-items-center gap-1"
                          >
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            <span>SOS (simulate)</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- SLIDE 4: CHAT -->
                <div class="carousel-item h-100">
                  <div class="h-100 d-flex flex-column px-3 px-md-4 pb-3">
                    <div class="card card-glass flex-grow-1 d-flex flex-column overflow-hidden">
                      <div class="card-body p-0 d-flex flex-column">
                        <!-- CHAT HEADER -->
                        <div
                          class="border-bottom px-3 py-2 d-flex align-items-center justify-content-between bg-white bg-opacity-75"
                        >
                          <div class="d-flex align-items-center gap-2">
                            <div
                              class="rounded-circle bg-gradient-primary text-white d-flex align-items-center justify-content-center shadow-sm"
                              style="width:38px;height:38px;"
                            >
                              <i class="fa-solid fa-robot"></i>
                            </div>
                            <div class="d-flex flex-column">
                              <span class="small fw-semibold">
                                Travel Companion
                              </span>
                              <span
                                class="small text-success d-flex align-items-center gap-1"
                              >
                                <span>●</span>
                                <span>Watching mood, safety and context</span>
                              </span>
                            </div>
                          </div>
                          <span
                            class="badge bg-primary-subtle text-primary small rounded-pill"
                          >
                            BETA+
                          </span>
                        </div>

                        <!-- CHAT BODY -->
                        <div
                          id="chatBox"
                          class="flex-grow-1 overflow-auto p-3 bg-chat"
                        >
                          <!-- Messages injected by JS -->
                        </div>

                        <!-- CHAT FOOTER -->
                        <div
                          class="border-top px-3 py-2 bg-white bg-opacity-75"
                        >
                          <div
                            id="chatQuickStrip"
                            class="d-flex flex-wrap gap-1 mb-2 small"
                          >
                            <!-- Quick chips from JS -->
                          </div>
                          <div
                            class="input-group input-group-sm shadow-sm rounded-pill overflow-hidden"
                          >
                            <input
                              id="chatInput"
                              type="text"
                              class="form-control border-0 bg-white"
                              placeholder="Tell me how you feel or ask anything…"
                            />
                            <button
                              id="btnSend"
                              type="button"
                              class="btn btn-primary px-3"
                            >
                              <i class="fa-solid fa-paper-plane"></i>
                            </button>
                          </div>
                          <div class="small text-muted mt-1">
                            Try:
                            <span class="fw-semibold">
                              “I feel anxious walking back”
                            </span>,
                            <span class="fw-semibold">
                              “Is this neighbourhood safe?”
                            </span>,
                            <span class="fw-semibold">
                              “Translate I’m vegetarian”
                            </span>.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>

              <!-- CAROUSEL CONTROLS (DESKTOP) -->
              <button
                class="carousel-control-prev d-none d-md-flex"
                type="button"
                data-bs-target="#appCarousel"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next d-none d-md-flex"
                type="button"
                data-bs-target="#appCarousel"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </section>

          <!-- CHAT ASIDE MIRROR (XXL) -->
          <aside
            class="d-none d-xxl-flex flex-column border-start bg-white bg-opacity-90 backdrop-blur shadow-sm"
            style="width:320px;"
          >
            <div
              class="p-3 border-bottom d-flex align-items-center gap-2"
            >
              <div
                class="rounded-circle bg-gradient-primary text-white d-flex align-items-center justify-content-center shadow-sm"
                style="width:36px;height:36px;"
              >
                <i class="fa-solid fa-robot"></i>
              </div>
              <div class="d-flex flex-column">
                <span class="small fw-semibold">
                  Companion (side view)
                </span>
                <span
                  class="small text-success d-flex align-items-center gap-1"
                >
                  <span>●</span>
                  <span>Chat while browsing other tabs</span>
                </span>
              </div>
            </div>
            <div
              id="chatBoxAside"
              class="flex-grow-1 overflow-auto p-3 bg-chat"
            >
              <div class="small text-muted mb-2">
                This panel mirrors the main chat – whatever you say there appears here too.
              </div>
            </div>
          </aside>
        </div>
      </div>
    </main>

    <!-- BOTTOM NAV (MOBILE) -->
    <nav
      class="d-md-none border-top bg-white bg-opacity-95 backdrop-blur"
    >
      <div class="d-flex text-center small">
        <button
          type="button"
          class="flex-fill py-2 border-0 bg-transparent nav-bottom-btn active d-flex flex-column align-items-center justify-content-center gap-1"
          data-bs-target="#appCarousel"
          data-bs-slide-to="0"
        >
          <i class="fa-solid fa-map-location-dot"></i>
          <span>Map</span>
        </button>
        <button
          type="button"
          class="flex-fill py-2 border-0 bg-transparent nav-bottom-btn d-flex flex-column align-items-center justify-content-center gap-1"
          data-bs-target="#appCarousel"
          data-bs-slide-to="1"
        >
          <i class="fa-solid fa-lightbulb"></i>
          <span>Ideas</span>
        </button>
        <button
          type="button"
          class="flex-fill py-2 border-0 bg-transparent nav-bottom-btn d-flex flex-column align-items-center justify-content-center gap-1"
          data-bs-target="#appCarousel"
          data-bs-slide-to="3"
        >
          <i class="fa-solid fa-shield-heart"></i>
          <span>Safety</span>
        </button>
        <button
          type="button"
          class="flex-fill py-2 border-0 bg-transparent nav-bottom-btn d-flex flex-column align-items-center justify-content-center gap-1"
          data-bs-target="#appCarousel"
          data-bs-slide-to="4"
        >
          <i class="fa-solid fa-message"></i>
          <span>Chat</span>
        </button>
      </div>
    </nav>
  </div>

  <!-- FLOATING SOS FAB (MOBILE) -->
  <button
    id="btnFabSOS"
    type="button"
    class="btn btn-danger rounded-circle shadow-lg position-fixed d-flex align-items-center justify-content-center"
    style="right:1.25rem;bottom:4.5rem;width:56px;height:56px;z-index:1080;"
    disabled
  >
    <i class="fa-solid fa-triangle-exclamation"></i>
  </button>

  <!-- EMERGENCY CONTACTS MODAL -->
  <div
    class="modal fade"
    id="contactsModal"
    tabindex="-1"
    aria-labelledby="contactsModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form id="contactsForm">
          <div class="modal-header">
            <h5
              class="modal-title"
              id="contactsModalLabel"
            >
              Emergency Contacts
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p class="small text-muted mb-2">
              Add at least <strong>3 trusted people</strong>. In a real app they’d receive your location if SOS or a missed check-in happens.
            </p>

            <div
              id="contactsContainer"
              class="vstack gap-2 small"
            >
              <!-- INITIAL ROWS -->
              <div class="row g-2 contact-row">
                <div class="col-5">
                  <input
                    type="text"
                    class="form-control form-control-sm contact-name"
                    placeholder="Name"
                    required
                  />
                </div>
                <div class="col-5">
                  <input
                    type="tel"
                    class="form-control form-control-sm contact-phone"
                    placeholder="Phone"
                    required
                  />
                </div>
                <div class="col-2">
                  <input
                    type="text"
                    class="form-control form-control-sm contact-relation"
                    placeholder="Rel."
                  />
                </div>
              </div>
              <div class="row g-2 contact-row">
                <div class="col-5">
                  <input
                    type="text"
                    class="form-control form-control-sm contact-name"
                    placeholder="Name"
                    required
                  />
                </div>
                <div class="col-5">
                  <input
                    type="tel"
                    class="form-control form-control-sm contact-phone"
                    placeholder="Phone"
                    required
                  />
                </div>
                <div class="col-2">
                  <input
                    type="text"
                    class="form-control form-control-sm contact-relation"
                    placeholder="Rel."
                  />
                </div>
              </div>
              <div class="row g-2 contact-row">
                <div class="col-5">
                  <input
                    type="text"
                    class="form-control form-control-sm contact-name"
                    placeholder="Name"
                    required
                  />
                </div>
                <div class="col-5">
                  <input
                    type="tel"
                    class="form-control form-control-sm contact-phone"
                    placeholder="Phone"
                    required
                  />
                </div>
                <div class="col-2">
                  <input
                    type="text"
                    class="form-control form-control-sm contact-relation"
                    placeholder="Rel."
                  />
                </div>
              </div>
            </div>

            <button
              id="btnAddContactRow"
              type="button"
              class="btn btn-link p-0 mt-2 small d-inline-flex align-items-center gap-1"
            >
              <i class="fa-solid fa-plus"></i>
              <span>Add one more</span>
            </button>

            <div
              id="contactsError"
              class="alert alert-danger py-1 px-2 mt-2 small d-none"
            ></div>
            <div
              id="contactsSuccess"
              class="alert alert-success py-1 px-2 mt-2 small d-none"
            ></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm rounded-pill"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="submit"
              class="btn btn-primary btn-sm rounded-pill"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- BOOTSTRAP JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- LEAFLET JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- APP JS -->
  <script src="script.js"></script>
</body>
</html>
